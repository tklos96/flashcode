<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/Grid/GridBoundaryConditions/Chombo/gr_bcGetRegion.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_06beb580571d8da4bd59dee7afe6838a.html">Grid</a></li><li class="navelem"><a class="el" href="dir_6ebd658f09dc477c2be5d9168dd0f546.html">GridBoundaryConditions</a></li><li class="navelem"><a class="el" href="dir_78b8794bfeb5887d9773f1d88118030d.html">Chombo</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">gr_bcGetRegion.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:af8e8d40e18bdeb46d05697c7a0a4e944"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_chombo_2gr__bc_get_region_8_f90.html#af8e8d40e18bdeb46d05697c7a0a4e944">gr_bcgetregion</a> (gridDataStruct, axis, endPoints, regionSize, mask, region, blockID, idest)</td></tr>
<tr class="separator:af8e8d40e18bdeb46d05697c7a0a4e944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a914e0a9148b3b41695e648a7fe5242c4"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_chombo_2gr__bc_get_region_8_f90.html#a914e0a9148b3b41695e648a7fe5242c4">gr_bcgetregionsmixedgds</a> (gridDataStruct, axis, secondDir, thirdDir, endPoints, regionSize, regionC, regionFN, regionFT1, regionFT2, blockID, idest)</td></tr>
<tr class="separator:a914e0a9148b3b41695e648a7fe5242c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="af8e8d40e18bdeb46d05697c7a0a4e944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8e8d40e18bdeb46d05697c7a0a4e944">&#9670;&nbsp;</a></span>gr_bcgetregion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gr_bcgetregion </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>gridDataStruct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>axis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(low:high,mdim), intent(in)&#160;</td>
          <td class="paramname"><em>endPoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(region_dim), intent(in)&#160;</td>
          <td class="paramname"><em>regionSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, dimension(regionsize(structsize)), intent(out)&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(regionsize(bc_dir),regionsize(second_dir),       regionsize(third_dir),regionsize(structsize)), intent(out)&#160;</td>
          <td class="paramname"><em>region</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>blockID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>idest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>call gr_bcGetRegion(integer(IN) :: gridDataStruct, integer(IN) :: axis, integer(IN) :: endPoints(LOW:HIGH,MDIM), integer(IN) :: regionSize(REGION_DIM), integer(OUT) :: mask(regionSize(4)), real(out) :: region(regionSize(1),regionSize(2),regionSize(3),regionSize(4)), integer(IN) :: blockID, integer(IN) :: idest)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gridDataStruct</td><td>optional integer value specifying data structure. </td></tr>
    <tr><td class="paramname">The</td><td>options are defined in constants.h and they are CENTER cell centered variables (default) FACEX face centered variable on faces along IAXIS FACEY face centered variable on faces along JAXIS FACEZ face centered variable on faces along IAXIS WORK work array specific to paramesh </td></tr>
    <tr><td class="paramname">axis</td><td>The axis on which boundary condition is being applied </td></tr>
    <tr><td class="paramname">endPoints</td><td>the boundaries of the region to be extracted from the Grid block </td></tr>
    <tr><td class="paramname">regionSize</td><td>regionSize(BC_DIR) contains the size of each row, regionSize(SECOND_DIR) contains the number of rows along the second direction, and regionSize(THIRD_DIR) has the number of rows along the third direction. regionSize(STRUCTSIZE) contains the number of variables in the data structure. </td></tr>
    <tr><td class="paramname">mask</td><td>Mask to be used if selected variables are getting boundary filled. Currently this only has meaning for PARAMESH4. </td></tr>
    <tr><td class="paramname">region</td><td>the extracted region </td></tr>
    <tr><td class="paramname">blockID</td><td>the local block ID. (With Paramesh4 f. this may actually be a blockHandle that refers to a remote block, but this implementation does not actually use </td></tr>
    <tr><td class="paramname">the</td><td>blockID at all if the grid is Paramesh4 f. see idest instead). </td></tr>
    <tr><td class="paramname">idest</td><td>has meaning only for PARAMESH4, where it distinguishes between leaf and parent nodes, should be 1 or 2; see NOTES below.</td></tr>
  </table>
  </dd>
</dl>
<p>NAME gr_bcGetRegion</p>
<p>DESCRIPTION This routine creates a region for the application of boundary condition to all supported data structures, described for argument gridDataStruct below. The region is stored in a four-dimensional array, where the fourth dimension represents the individual variables of the data structure. The other dimensions store a set of rows containing relevant sections of the block on which the boundary conditions are being applied. Each row contains a complete set of data points to correctly apply the boundary conditions along the specified axis. The endPoints argument specifies the bounding box of the regions being selected. For more details, see the example below:</p>
<p>EXAMPLE In this example with 2D data on a LEAF block, we want to apply boundary conditions on the right face of IAXIS, and we wish to fetch columns 7 and 8 of the interior data and all the columns of the guardcell data. Since this example has 4 guardcells on each side, the actual column numbers are 11,12 for the interior and 13-16 for the guardcells to be filled. </p><pre class="fragment">---- - - - - - - - - ----
---- - - - - - - - - ----
---- - - - - - - - - ----
---- - - - - - - - - ----
</pre><p> 8 -&mdash;|-|-|-|-|-|-|*|*|-&mdash; 7 -&mdash;|-|-|-|-|-|-|*|*|-&mdash; 6 -&mdash;|-|-|-|-|-|-|*|*|-&mdash; 5 -&mdash;|-|-|-|-|-|-|*|*|-&mdash; 4 -&mdash;|-|-|-|-|-|-|*|*|-&mdash; 3 -&mdash;|-|-|-|-|-|-|*|*|-&mdash; 2 -&mdash;|-|-|-|-|-|-|*|*|-&mdash; 1 -&mdash;|-|-|-|-|-|-|*|*|-&mdash; j -&mdash; - - - - - - - - -&mdash;</p>
<hr/>
<hr/>
<hr/>
<p> i 1-2-3-4 5-6-7-8</p>
<p>Then the values in the arguement endpoints should be </p><pre class="fragment"> endPoint(LOW,IAXIS) = 11; endPoint(HIGH,IAXIS)=16
 endPoint(LOW,JAXIS) = 1 ; endPoint(HIGH,JAXIS)=16
 endPoint(LOW:HIGH,KAXIS) = 1
</pre><p>RegionSize argument should have RegionSize(:)=endPoint(HIGH,:)-endPoint(LOW,:)+1</p>
<p>The argument Region will contain the data being fetched, so should be allocated as Region(RegionSize(IAXIS),RegionSize(JAXIS),RegionSize(KAXIS),vars) where vars is the number of variables in the data structure; NUNK_VARS for cell centered, NFACE_VARS for face centered along IAXIS etc.</p>
<p>Please Note that if we were interested in rows (in other words the top regions) then the allocation would have been Region(RegionSize(JAXIS),RegionSize(IAXIS),RegionSize(KAXIS),vars)</p>
<p>The call will have the following syntax:</p>
<p>call gr_bcGetRegion(CENTER,IAXIS,endPoint,regionSize,mask,Region,blockID, idest)</p>
<p>NOTES Beginning with PARAMESH3: The solution data used to fill the region array are not copied directly from "permanent" storage (UNK,WORK,etc.), but from the one-block arrays (UNK1,WORK1,etc.) that are filled by PARAMESH while it is processing a block's data. Calls to gr_bcGetRegion are therefore only valid in certain contexts. The idest argument is then taken as an index into these one-block arrays. It distinguishes between the slots available and must match the slot that has actually been filled by PARAMESH. </p>

</div>
</div>
<a id="a914e0a9148b3b41695e648a7fe5242c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a914e0a9148b3b41695e648a7fe5242c4">&#9670;&nbsp;</a></span>gr_bcgetregionsmixedgds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gr_bcgetregionsmixedgds </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>gridDataStruct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>axis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>secondDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>thirdDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(low:high,mdim), intent(in)&#160;</td>
          <td class="paramname"><em>endPoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(region_dim), intent(in)&#160;</td>
          <td class="paramname"><em>regionSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:,:), pointer&#160;</td>
          <td class="paramname"><em>regionC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:,:), pointer&#160;</td>
          <td class="paramname"><em>regionFN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:,:), pointer&#160;</td>
          <td class="paramname"><em>regionFT1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:,:), pointer&#160;</td>
          <td class="paramname"><em>regionFT2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>blockID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>idest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
