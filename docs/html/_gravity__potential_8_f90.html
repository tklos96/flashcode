<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/physics/Gravity/Gravity_potential.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_1cda4e1d5b1cb0a75978177217cc7d6e.html">physics</a></li><li class="navelem"><a class="el" href="dir_1eb4296dbc37118a996815b8a2f503c8.html">Gravity</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">Gravity_potential.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a6831d1811e56c7c999bafce1dad13c12"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gravity__potential_8_f90.html#a6831d1811e56c7c999bafce1dad13c12">gravity_potential</a> (potentialIndex)</td></tr>
<tr class="separator:a6831d1811e56c7c999bafce1dad13c12"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a6831d1811e56c7c999bafce1dad13c12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6831d1811e56c7c999bafce1dad13c12">&#9670;&nbsp;</a></span>gravity_potential()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gravity_potential </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>potentialIndex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>call Gravity_potential(optional,integer(IN) :: potentialIndex)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">potentialIndex</td><td>If present, determines which variable in UNK to use for storing the updated potential. If not present, GPOT_VAR is assumed. Presence or absense of this optional dummy argument also determines whether some side effects are enabled or disabled; see discussion of two modes under NOTES below.</td></tr>
  </table>
  </dd>
</dl>
<p>NAME</p>
<p>Gravity_potential</p>
<p>DESCRIPTION </p><pre class="fragment"> This routine computes the gravitational potential on all
 blocks specified in the list, for the gravity implementations
 (i.e., various Poisson implementations), which make use of it
 in computing the gravitational acceleration.

 The resulting potential can be considered as zone-averaged.

 Supported boundary conditions are isolated (0) and
 periodic (1).  The same boundary conditions are applied
 in all directions.  For some implementation of Gravity,
 in particular with Barnes-Hut tee solver, additional combinations
 of boundary conditions may be supported.
</pre><p>NOTES</p>
<p>Gravity_potential can operate in one of two modes:</p><ul>
<li>automatic mode - when called without the optional potentialIndex. Such a call will usually be made once per time step, usually from the main time advancement loop in Driver_evolveFlash. Various side effects are enabled in this mode, see SIDE EFFECT below.</li>
<li>explicit mode - when called with the optional potentialIndex. The potential is stored in the variable explicitly given, and side effects like saving the previous potential in GPOL_VAR and updating some sink particle state and properties are suppressed.</li>
</ul>
<p>This call does nothing for those Gravity implementations provided with FLASH that just provide a given (time-independent) potential for other physics modules and don't compute the potential by invoking a solver: Constant, PointMass, and PlanePar.</p>
<p>SIDE EFFECTS</p>
<p>Updates certain variables in permanent UNK storage to contain the gravitational potential. Invokes a solver (of the Poisson equation) if necessary. On return, if potentialIndex is not present, GPOT_VAR: contains potential for the current simulation time. GPOL_VAR (if defined): contains potential at the previous simulation time. On return, if potentialIndex is present, the UNK variable given by potentialIndex contains the newly computed potential.</p>
<p>May affect other variables related to particle properties if particles are included in the simulation. In particular, PDEN_VAR (if defined): may get updated to the current density from particles if particles have mass.</p>
<p>There are additional side effects if sink particles are used. These effects happen by calls to Particles_sinkAccelGasOnSinks and Particles_sinkAccelSinksOnGas, which may update sink particle properties and additional UNK variables that store accelerations. The calls are only made in automatic mode.</p>
<p>May modify certain variables used for intermediate results by the solvers invoked. The list of variables depends on the Gravity implementation. The following information is subject to change without notice. For the Multigrid implementation: ISLS_VAR (residual) ICOR_VAR (correction) IMGM_VAR (image mass) IMGP_VAR (image potential) For the Multipole implementation: (none) </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
