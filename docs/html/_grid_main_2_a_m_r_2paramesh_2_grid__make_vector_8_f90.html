<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/Grid/GridMain/AMR/paramesh/Grid_makeVector.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_06beb580571d8da4bd59dee7afe6838a.html">Grid</a></li><li class="navelem"><a class="el" href="dir_a5ba4d35013f375122597140872d1634.html">GridMain</a></li><li class="navelem"><a class="el" href="dir_05ae419e4599d04cada32fb260516b32.html">AMR</a></li><li class="navelem"><a class="el" href="dir_dc00a9966eb127812b09432c10e25e84.html">paramesh</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">Grid_makeVector.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;constants.h&quot;</code><br />
<code>#include &quot;Flash.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac22830a985e1daed0c9eadba8c6f606e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_grid_main_2_a_m_r_2paramesh_2_grid__make_vector_8_f90.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(condition)&#160;&#160;&#160;if (.NOT.(condition)) call Driver_abortFlash(&quot;Grid_makeVector: ASSERT failed! Not true: condition&quot;)</td></tr>
<tr class="separator:ac22830a985e1daed0c9eadba8c6f606e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:abb03b9d4c0258f3c8f6285356f30b89a"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_grid_main_2_a_m_r_2paramesh_2_grid__make_vector_8_f90.html#abb03b9d4c0258f3c8f6285356f30b89a">grid_makevector</a> (vecLen, numVars, newVec, numVec, vecLastFree, copyDirection, gridDataStruct)</td></tr>
<tr class="separator:abb03b9d4c0258f3c8f6285356f30b89a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf4caf62fd95df692133cc0ba3af6aa3"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_grid_main_2_a_m_r_2paramesh_2_grid__make_vector_8_f90.html#acf4caf62fd95df692133cc0ba3af6aa3">transferdata</a> (eosRange, subBlkSize, vecLen, dataPtr, ptr, ivec, copyDir, gridDataStruct)</td></tr>
<tr class="separator:acf4caf62fd95df692133cc0ba3af6aa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac22830a985e1daed0c9eadba8c6f606e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac22830a985e1daed0c9eadba8c6f606e">&#9670;&nbsp;</a></span>ASSERT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASSERT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">condition</td><td>)</td>
          <td>&#160;&#160;&#160;if (.NOT.(condition)) call Driver_abortFlash(&quot;Grid_makeVector: ASSERT failed! Not true: condition&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="abb03b9d4c0258f3c8f6285356f30b89a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb03b9d4c0258f3c8f6285356f30b89a">&#9670;&nbsp;</a></span>grid_makevector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine grid_makevector </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>vecLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>numVars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(veclen,numvars,numvec), intent(inout)&#160;</td>
          <td class="paramname"><em>newVec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(inout)&#160;</td>
          <td class="paramname"><em>numVec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out), optional&#160;</td>
          <td class="paramname"><em>vecLastFree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>copyDirection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>gridDataStruct</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>call Grid_makeVector(integer(IN) :: vecLen, integer(IN) :: numVars, real(INOUT),dimension(vecLen,numVars,numVec) :: newVec, integer(INOUT) :: numVec, OPTIONAL,integer(OUT) :: vecLastFree, OPTIONAL,integer(IN) :: copyDirection, OPTIONAL,integer(IN) :: gridDataStruct)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vecLen</td><td>the length of vector into which solution data needs to be converted </td></tr>
    <tr><td class="paramname">numVars</td><td>number of variables per cell that are stored in newVec. For use with the Eos unit as in this example, this should be = EOS_NUM. </td></tr>
    <tr><td class="paramname">newVec</td><td>storage for newly generated vectors. </td></tr>
    <tr><td class="paramname">The</td><td>repackaged (and Eos_getData preprocessed) data is returned here, ready to call Eos on. </td></tr>
    <tr><td class="paramname">numVec</td><td>number of vectors (of numVars variables each) to be generated from all that data contained in all blocks. On return, numVec may be modified (lowered) so it counts only vectors actually used. </td></tr>
    <tr><td class="paramname">vecLastFree</td><td>If this optional argument is present, it will on return contain a count of free (unused) positions of the last vector. That is, the valid vectors returned consist of </td></tr>
    <tr><td class="paramname">newVec(1</td><td>vecLen-vecLastFree, where numVec is the count of vectors returned (possibly lowered). If the argument is not present, no indication of incomplete vectors is provided to the caller. If returning all blockdata as vectors would overflow the available space </td></tr>
    <tr><td class="paramname">in</td><td>newVec, then vecLastFree (if present) will be set to 1 to indicate this condition. </td></tr>
    <tr><td class="paramname">copyDirection</td><td>Direction of data transfer. Use GRID_COPYDIR_TO_VECT to tranfer data from Grid blocks to vectors (default); use GRID_COPYDIR_FROM_VECT to tranfer data from vectors back to Grid blocks. </td></tr>
    <tr><td class="paramname">gridDataStruct</td><td>whether cell centered, face centered etc. (may be deprecated later). Should be CENTER if present. FLASH does not require support for marshalling other datastructs (FACEX, etc.) for Eos calls.</td></tr>
  </table>
  </dd>
</dl>
<p>NAME Grid_makeVector</p>
<p>DESCRIPTION</p>
<p>This routine converts solution data organized as blocks into a collection of vectors.</p>
<p>The length of the vector is an input "vecLen", which can be smaller or bigger in size than the data contained in one block. The value will typically be dictated by the constraints of the target hardware. The value "numVec" is the number of vectors that will be generated from flattening of N blocks. Its value is N * oneBlockSize / vecLen. The newly generated vectors are stored in newVec, which is in this version a 3D array. Part of the exercise is to determine if it should be a 2D or 3D array and what should be the data layout for different variables. Should variable be the leading dimension or should space be the leading dimension.</p>
<p>NOTES</p>
<p>This is for demonstration, it may or may not work.</p>
<p>GRID_COPYDIR_TO_VECT and GRID_COPYDIR_FROM_VECT are defined in <a class="el" href="_grid__interface_8_f90.html">Grid_interface.F90</a> .</p>
<p>SEE ALSO</p>
<p>Eos_getData Eos_putData Eos Grid_interface </p>

</div>
</div>
<a id="acf4caf62fd95df692133cc0ba3af6aa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf4caf62fd95df692133cc0ba3af6aa3">&#9670;&nbsp;</a></span>transferdata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine grid_makevector::transferdata </td>
          <td>(</td>
          <td class="paramtype">integer, dimension(low:high,mdim), intent(in)&#160;</td>
          <td class="paramname"><em>eosRange</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>subBlkSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>vecLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:,:), pointer&#160;</td>
          <td class="paramname"><em>dataPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ivec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>copyDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>gridDataStruct</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
