<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/Grid/GridParticles/GridParticlesMove/ParticlesOwned/Sieve/gr_ptMoveSieve.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_06beb580571d8da4bd59dee7afe6838a.html">Grid</a></li><li class="navelem"><a class="el" href="dir_3663af0769abe994a06b6745dc09c949.html">GridParticles</a></li><li class="navelem"><a class="el" href="dir_e5618e81d4c1e156435b9ca0b8d372fd.html">GridParticlesMove</a></li><li class="navelem"><a class="el" href="dir_e2985f20afaa60a94e94be359b3f1f49.html">ParticlesOwned</a></li><li class="navelem"><a class="el" href="dir_75a6c1b3745b4f24f300893338e14f83.html">Sieve</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">gr_ptMoveSieve.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a70c9d1d9e228f6a8fba05a342541e045"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_grid_particles_2_grid_particles_move_2_particles_owned_2_sieve_2gr__pt_move_sieve_8_f90.html#a70c9d1d9e228f6a8fba05a342541e045">gr_ptmovesieve</a> (dataBuf, localCount, propCount, maxCount, numDest, matchProp)</td></tr>
<tr class="separator:a70c9d1d9e228f6a8fba05a342541e045"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a70c9d1d9e228f6a8fba05a342541e045"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70c9d1d9e228f6a8fba05a342541e045">&#9670;&nbsp;</a></span>gr_ptmovesieve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gr_ptmovesieve </td>
          <td>(</td>
          <td class="paramtype">real, dimension(propcount, maxcount), intent(inout)&#160;</td>
          <td class="paramname"><em>dataBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(inout)&#160;</td>
          <td class="paramname"><em>localCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>propCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>maxCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(inout)&#160;</td>
          <td class="paramname"><em>numDest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>matchProp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>gr_ptMoveSieve(real(INOUT) :: dataBuf(:,:), integer(INOUT) :: localCount, integer(IN) :: propCount, integer(IN) :: maxCount, integer(INOUT) :: numDest, optional, integet(IN) :: matchProp)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dataBuf</td><td>List of data elements. It is two dimensional real array, the first dimension represents each particle's properties, and second dimension is index to elements. </td></tr>
    <tr><td class="paramname">localCount</td><td>While coming in it contains the current number of elements mapped to this processor. After all the data structure movement, the number of local elements might change, and the new value is put back into it </td></tr>
    <tr><td class="paramname">propCount</td><td>number of particle attributes </td></tr>
    <tr><td class="paramname">maxCount</td><td>This is parameter determined at runtime, and is the maximum number of loca elements that a simulation expects to have. All the arrays in the elements unit are allocated based on this number </td></tr>
    <tr><td class="paramname">numDest</td><td>the count of data elements in the sieve at any iteration </td></tr>
    <tr><td class="paramname">matchProp</td><td>property to be matched to find the destination of the data element</td></tr>
  </table>
  </dd>
</dl>
<p>NAME gr_ptMoveSieve</p>
<p>DESCRIPTION</p>
<p>This routine moves non stationary Grid data elements to the correct block and processor. The data elements such as particles may have moved because of time advancement, or after the grid has refined or derefined. Other data elements such as those associated with rays follow the path of the ray.</p>
<p>Overview of algorithm</p>
<ul>
<li>Sort the elements in the order of their associated blocks. This makes for faster searching and processing of particles</li>
<li>Find all the elements that belong on one of the local blocks and make sure that the appropriate block number is associated with them.</li>
<li>send elements in buffer to the first right neighbor. (send a dummy if no elements need to move off proc), and recv them from immediate left neighbor and add them to the elements data structure</li>
<li>Also send gr_globalID and oldBlksProcessed arrays to neighbor</li>
<li>repeat this process sending uprocessed elements to immediate left neighbor, then right neighbor + 2, then left neighbor + 2 and so on until all the elements have been processed.</li>
</ul>
<p>NOTES</p>
<p>SEE ALSO</p>
<p>gr_ptLocalMatch </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
