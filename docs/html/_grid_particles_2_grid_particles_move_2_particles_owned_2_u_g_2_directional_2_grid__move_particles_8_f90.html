<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/Grid/GridParticles/GridParticlesMove/ParticlesOwned/UG/Directional/Grid_moveParticles.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_06beb580571d8da4bd59dee7afe6838a.html">Grid</a></li><li class="navelem"><a class="el" href="dir_3663af0769abe994a06b6745dc09c949.html">GridParticles</a></li><li class="navelem"><a class="el" href="dir_e5618e81d4c1e156435b9ca0b8d372fd.html">GridParticlesMove</a></li><li class="navelem"><a class="el" href="dir_e2985f20afaa60a94e94be359b3f1f49.html">ParticlesOwned</a></li><li class="navelem"><a class="el" href="dir_3083f41b38dcd9e1e50646b096350662.html">UG</a></li><li class="navelem"><a class="el" href="dir_63cc1009a38828e7579619eee2c11bcc.html">Directional</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">Grid_moveParticles.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;constants.h&quot;</code><br />
<code>#include &quot;Flash.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:ab5fd4f0ba5689e3079401069724651d8"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_grid_particles_2_grid_particles_move_2_particles_owned_2_u_g_2_directional_2_grid__move_particles_8_f90.html#ab5fd4f0ba5689e3079401069724651d8">grid_moveparticles</a> (dataBuf, propCount, maxCount, localCount, index_list, indexCount, coords_in_blk)</td></tr>
<tr class="separator:ab5fd4f0ba5689e3079401069724651d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="ab5fd4f0ba5689e3079401069724651d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5fd4f0ba5689e3079401069724651d8">&#9670;&nbsp;</a></span>grid_moveparticles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine grid_moveparticles </td>
          <td>(</td>
          <td class="paramtype">real, dimension(propcount, maxcount), intent(inout)&#160;</td>
          <td class="paramname"><em>dataBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>propCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>maxCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(inout)&#160;</td>
          <td class="paramname"><em>localCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(indexcount), intent(in)&#160;</td>
          <td class="paramname"><em>index_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>indexCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>coords_in_blk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>Grid_moveParticles(real(INOUT) :: dataBuf(:,:), integer(IN) :: propCount integer(INOUT) :: localCount, integer(IN) :: maxCount, integer(IN) :: index_list(indexCount), integer(IN) :: indexCount logical(IN) :: coords_in_blk)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dataBuf</td><td>the data structure containing the data of interest It is two dimensional real array, the first dimension represents properties associated with the data structure, and second dimension is index to individual elements in the datastructure. </td></tr>
    <tr><td class="paramname">propCount</td><td>number of properties for this datastructure </td></tr>
    <tr><td class="paramname">localCount</td><td>While coming in it contains the current number of elements in the data structure mapped to this processor. After all the data structure movement, the number might change, and the new value is put back into it </td></tr>
    <tr><td class="paramname">maxCount</td><td>This is parameter determined at runtime, and is the maximum count of elements that a simulation expects to have. All the arrays are allocated based on this number </td></tr>
    <tr><td class="paramname">index_list</td><td>The list of fields in the incoming dataBuf, the list are used to make the indices of tag, block processor and physical location of each individual data item to the GridParticles subunit so it can move the concerned data item appropriately </td></tr>
    <tr><td class="paramname">indexCount</td><td>The count of fields included in index_list </td></tr>
    <tr><td class="paramname">coords_in_blk</td><td>if true then re-gridding just happened and blocks have changed</td></tr>
  </table>
  </dd>
</dl>
<p>NAME Grid_moveParticles</p>
<p>DESCRIPTION</p>
<p>If some of the particles (active or tracer) need to move to the part of the physical domain that is mapped to a different processor, this function moves their data structure to the appropriate processors</p>
<p>This implementations gets particles to the correct processor by first sweeping in the x direction and moving particles to the x direction neighbors. Then another sweep in the y direction moves particles to the y neighbors, followed by z. A particle then could physically be moved 3 times. We proceeded in this way because this method reduces the number of exchanges which are expensive because of latency. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
