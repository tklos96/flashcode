<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/IO/IO_output.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_a2299b85ef517c141bbfcc23f706b99e.html">IO</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">IO_output.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a48733c7b218d3e9a7edfa72e6d6356fd"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_o__output_8_f90.html#a48733c7b218d3e9a7edfa72e6d6356fd">io_output</a> (simTime, dt, nstep, nbegin, endRun, outputType)</td></tr>
<tr class="separator:a48733c7b218d3e9a7edfa72e6d6356fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a48733c7b218d3e9a7edfa72e6d6356fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48733c7b218d3e9a7edfa72e6d6356fd">&#9670;&nbsp;</a></span>io_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine io_output </td>
          <td>(</td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>simTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in)&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>nstep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>nbegin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(out)&#160;</td>
          <td class="paramname"><em>endRun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>outputType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>IO_output(real(in) :: simTime, real(in) :: dt, integer(in) :: nstep, integer(in) :: nbegin, logical(out) :: endRun, integer(in), optional :: outputType)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">simTime</td><td>simulation time </td></tr>
    <tr><td class="paramname">dt</td><td>timestep </td></tr>
    <tr><td class="paramname">nstep</td><td>current time step number </td></tr>
    <tr><td class="paramname">nbegin</td><td>beginning time step number, if starting from scratch this is 0, it could be different in case of restart </td></tr>
    <tr><td class="paramname">endRun</td><td>will be set to .TRUE. on return if existence of a .dump_restart or a .kill file was detected; .FALSE. otherwise. </td></tr>
    <tr><td class="paramname">outputType</td><td>an integer that denotes the type of output files you expect to generate with this call. If this argument is omitted IO_output will test to see if it is time to output every kind of file.</td></tr>
  </table>
  </dd>
</dl>
<p>NAME</p>
<p>IO_output</p>
<p>DESCRIPTION</p>
<p>This routine is called after every sweep to check if it is time to output. Checkpoints and plotfiles and .dat files are handled through this function.</p>
<p>A checkpoint can be triggered in a few different ways. First, enough wall clock time has elapsed since the code has started running that we want to force a checkpoint now. This is controlled by the wall_clock_checkpoint runtime parameter. This is always timed from the start of execution of the code, and not since the last checkpoint, so we can ensure that we get a checkpoint dumped right before the queue window closes. Checkpoints are also produced after a given amount of simulation time has elapsed &ndash; this is controlled by the checkpointFileIntervalTime runtime parameter. Finally, a checkpoint can be forced in to be produced every checkpointFileIntervalStep timesteps or by creating .dump_checkpoint file in the execution directory.</p>
<p>Plotfiles are produced equally spaced in simulation time, tplot time units apart. They can also be produced on demand by temporarily creating .dump_plotfile execution control file.</p>
<p>After every sweep, IO_writeIntegralQuantities is called to compute some global quantities and write them to the flash.dat file.</p>
<p>A checkpoint is given a name according to the basename (specified via the basenm runtime parameter) and the filetype (pnetcdf, HDF5). Each separate checkpoint is given a unique number suffix. The value to start with (or restart from if this simulation was a restart from a previous checkpoint) is set by the checkpointFileNumber runtime parameter. Or if it is a restart, checkpointFileNumber can be saved as a scalar in the checkpoint file.</p>
<p>Execution will be aborted immediately if .kill file is present in the execution directory. If .dump_restart is present then a checkpoint file is saved before aborting execution.</p>
<p>For more detail about runtime parameters controlling IO output look at the IO/common Config file or the setup_params text file written to the object directory.</p>
<p>NOTES</p>
<p>Variables that start with "io_", like io_checkpointFileNumber and io_checkpointFileIntervalTime are located in the IO_data fortran module. The "io_" is meant to indicated that this variable has IO Unit scope. Variable without the "io_" in front are local variables to this subroutine.</p>
<p>The outputType argument has a series of constants declared in constants.h which allow you to state which filed you wish to have output (povided that the normal output conditions are met) by this call. The options are:</p>
<p>CHECKPOINT_FILE_ONLY PLOTFILE_ONLY PRTICLE_FILE_ONLY CHECKPOINT_AND_PLOTFILE CHECKPOINT_AND_PARTICLEFILE PLOTFILE_AND_PARTICLEFILE ALL_FILES</p>
<p>If the optional outputType arguemnt is omitted, ALL_FILES is assumed.</p>
<p>SIDE EFFECTS</p>
<p>For visualization purposes, the data is restricted up the entire tree, so the data is valid on all levels. This allows multi-resolution vis techniques to be applied. Immediately after checkpointing or writing a plotfile is the only time the data is guaranteed to be valid on all levels.</p>
<p>SEE ALSO IO_writeCheckpoint, IO_writeIntegralQuantities, IO_writeParticles, IO_writePlotfile, IO_writeUserArray, IO_setScalar </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
