<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/Grid/GridParticles/GridParticlesMapToMesh/ParticlesOwned/Paramesh/MoveSieve/gr_ptMoveMappedData.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_06beb580571d8da4bd59dee7afe6838a.html">Grid</a></li><li class="navelem"><a class="el" href="dir_3663af0769abe994a06b6745dc09c949.html">GridParticles</a></li><li class="navelem"><a class="el" href="dir_280e392330c2306bbf95358037983a69.html">GridParticlesMapToMesh</a></li><li class="navelem"><a class="el" href="dir_bdb741849028512a0801e27210ab8b5a.html">ParticlesOwned</a></li><li class="navelem"><a class="el" href="dir_b3438469cac9661eda7b7aefe3c1b4b3.html">Paramesh</a></li><li class="navelem"><a class="el" href="dir_03cb3c0c11788cb3624a0a5a7b061535.html">MoveSieve</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">gr_ptMoveMappedData.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;constants.h&quot;</code><br />
<code>#include &quot;Flash.h&quot;</code><br />
<code>#include &quot;Flash_mpi.h&quot;</code><br />
<code>#include &quot;gr_ptMapToMesh.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a7f4a7addaa7db29343e532eef062e66d"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_move_sieve_2gr__pt_move_mapped_data_8_f90.html#a7f4a7addaa7db29343e532eef062e66d">gr_ptmovemappeddata</a> (varGrid, bufferSize, sendBuf, sendCount, recvBuf)</td></tr>
<tr class="separator:a7f4a7addaa7db29343e532eef062e66d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a7f4a7addaa7db29343e532eef062e66d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f4a7addaa7db29343e532eef062e66d">&#9670;&nbsp;</a></span>gr_ptmovemappeddata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gr_ptmovemappeddata </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>varGrid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>bufferSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(buffersize), intent(inout)&#160;</td>
          <td class="paramname"><em>sendBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(inout)&#160;</td>
          <td class="paramname"><em>sendCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(buffersize), intent(inout)&#160;</td>
          <td class="paramname"><em>recvBuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>gr_ptMoveMappedData(integer,intent(IN) :: varGrid, &amp; integer,intent(IN) :: bufferSize, &amp; real,dimension(bufferSize),intent(INOUT) :: sendBuf, &amp; integer,intent(INOUT) :: sendCount, &amp; real,dimension(bufferSize),intent(INOUT) :: recvBuf)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">varGrid</td><td>Index of gridded variable to receive interpolated quantity </td></tr>
    <tr><td class="paramname">bufferSize</td><td>The size of the sendBuf and recvBuf arrays </td></tr>
    <tr><td class="paramname">sendBuf</td><td>An array used to store data intended for another processor </td></tr>
    <tr><td class="paramname">sendCount</td><td>The number of data elementes to be sent to another processor </td></tr>
    <tr><td class="paramname">recvBuf</td><td>An array containing the data just receieved from another processor</td></tr>
  </table>
  </dd>
</dl>
<p>NAME gr_ptMoveMappedData</p>
<p>DESCRIPTION</p>
<p>Routine which manages the communication of smeared grid cells between processors. The smeared grid cells are stored in a send buffer, which is passed between processors. A general communication approach is taken because we may not know the destination processor until the metadata corner ID is analysed. As such, an approach is taken which (on average) minimises the number of times the send buffer is passed beween processors in order for the smeared grid cells reach the correct processor. In general, if a nearest neighbor block exists on another processor, then that processor will be a close neighbor of the current processor. This is because the blocks are ordered according to a Morton-Space filling curve, and as such, there is a high degree of spatial locality.</p>
<p>Each processor passes its send buffer back and forth, starting with its nearest neighbors, and then gradually working to its furthest away neighbors. This exploits the spatial locality, and means, in general, the size of send buffer decreases rapidly with each passing round. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
