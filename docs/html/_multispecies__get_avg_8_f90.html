<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/Multispecies/Multispecies_getAvg.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_127828e31954d2147379ce9ee43ecdbd.html">Multispecies</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">Multispecies_getAvg.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a109dd6c8cac92283c4e1f0b00186269a"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_multispecies__get_avg_8_f90.html#a109dd6c8cac92283c4e1f0b00186269a">multispecies_getavg</a> (property, value, weights, speciesMask)</td></tr>
<tr class="separator:a109dd6c8cac92283c4e1f0b00186269a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a109dd6c8cac92283c4e1f0b00186269a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a109dd6c8cac92283c4e1f0b00186269a">&#9670;&nbsp;</a></span>multispecies_getavg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine multispecies_getavg </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>property</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(out)&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:), intent(in), optional&#160;</td>
          <td class="paramname"><em>weights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(nspecies), intent(in), optional&#160;</td>
          <td class="paramname"><em>speciesMask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>Multispecies_getAvg( integer(in) :: property, real(out) :: value, real(in),optional :: weights(:), integer(in),optional :: speciesMask(NSPECIES))</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">property</td><td>name of property, as an integer defined in Multispecies.h </td></tr>
    <tr><td class="paramname">value</td><td>returned average value from routine </td></tr>
    <tr><td class="paramname">weights</td><td>an optional array of length 1 or NSPECIES holding the weights for each species. If not provided, weight=1 is assumed. If a weights array of size 1 is provided, its value is applied to all species. </td></tr>
    <tr><td class="paramname">speciesMask</td><td>an optional array of length NSPECIES specifying the wanted species for the average calculation If not provided, all species are used.</td></tr>
  </table>
  </dd>
</dl>
<p>NAME</p>
<p>Multispecies_getAvg</p>
<p>DESCRIPTION</p>
<p>Gets the weighted average value of a property for requested species.</p>
<p>Avg = sum over species( weight * propertyValue) / (number of species)</p>
<p>The default is to return the average for all species. A user, however, by passing in the optional argument speciesMask can choose to include only species of interest.</p>
<p>speciesMask is an array of integers of size Number of Species (NSPECIES) in length. The speciesMask works inclusively, that is the user specifies species that should be <em>included</em> in the average.</p>
<p>For example: in a given simulation there are 4 defined species NI56, CO61, MG23, FE51. They are defined in Flash.h as NI56_SPEC, CO61_SPEC, MG23_SPEC, and FE51_SPEC respectively. If the user wants to get an average of just NI56 and FE51 then the user would pass in the speciesMask argument where</p>
<p>speciesMask(1) = NI56_SPEC speciesMask(2) = FE51_SPEC speciesMask(3) = UNDEFINED_INT speciesMask(4) = UNDEFINED_INT</p>
<p>Order does not matter, however the order of the weights array MUST be the same as the mask. For example, if the user wants NI56 weighted twice as heavily as FE51 in the previous example, he would set</p>
<p>weights(1) = 2.0 weights(2) = 1.0 weights(3) = UNDEFINED_REAL weights(4) = UNDEFINED_REAL</p>
<p>The property is an integer because it is defined in Multispecies.h </p><h2>description property(defined as integer in Multispecies.h) </h2>
<p>numTotal A Total number of protons and neutrons in nucleus numPositive Z Atomic number; number of protons in nucleus numNeutral N Number of neutrons numNegative E Number of electrons bindingEnergy EB Binding energy adiabatic index GAMMA Ratio of heat capacities: Cp / Cv</p>
<p>NOTES</p>
<p>Species properties are normally set in Simulation_initSpecies. The simulation's Config file defines the number and name of species, as in SPECIES AIR SPECIES SF6</p>
<p>EXAMPLE</p>
<p>subroutine Eos() use Eos_data, ONLY: implicit none #include "Multispecies.h" .... declarations real, dimension(NSPECIES) :: weights integer, dimension(NSPECIES) :: mask .... executable statements call Multispecies_getAvg(A,value,weights,mask) ..... end subroutine Eos </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
