<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/Particles/ParticlesInitialization/Particles_initPositions.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_ee0f4785c026b8a06a4a8041ca0ca9f6.html">Particles</a></li><li class="navelem"><a class="el" href="dir_df39b9eb5842c26b01cf7bfdafb9a383.html">ParticlesInitialization</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">Particles_initPositions.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:ab2b1b5b3a21b44ba2d5d589a8c85d4ee"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_particles_initialization_2_particles__init_positions_8_f90.html#ab2b1b5b3a21b44ba2d5d589a8c85d4ee">particles_initpositions</a> (partPosInitialized, updateRefine)</td></tr>
<tr class="separator:ab2b1b5b3a21b44ba2d5d589a8c85d4ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="ab2b1b5b3a21b44ba2d5d589a8c85d4ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2b1b5b3a21b44ba2d5d589a8c85d4ee">&#9670;&nbsp;</a></span>particles_initpositions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine particles_initpositions </td>
          <td>(</td>
          <td class="paramtype">logical, intent(inout)&#160;</td>
          <td class="paramname"><em>partPosInitialized</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(out)&#160;</td>
          <td class="paramname"><em>updateRefine</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>call Particles_initPositions( logical(inout) :: partPosInitialized, logical(out) :: updateRefine)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partPosInitialized</td><td>boolean indicating whether particles positions were successfully initialized. On entry, a value of TRUE is taken to mean that position initialization has already been completed previously, so the routine returns immediately (leaving partPosInitialized TRUE). If particles are disabled (as per runtime parameter useParticles), this implementation also returns immediately with partPosInitialized set to TRUE. Otherwise, partPosInitialized will be to TRUE if all particles have been placed in the domain successfully. A return value of FALSE may indicate that only some particles have been placed in the domain, perhaps because of space limitations in the particles array in some MPI tasks; partially initialized particles data of this kind may still be useful during FLASH initialization, in particular for the the purpose of providing refinement criteria for the initial Grid construction if the runtime parameter refine_on_particle_count is TRUE, but a fully successful Particles_initPositions invocation is still required before the simulation is allowed to proceed with its main evolution loop. </td></tr>
    <tr><td class="paramname">updateRefine</td><td>is set to TRUE if the routine wishes to indicate that during the initial iterative construction of an AMR Grid (see Grid_initDomain and gr_expandDomain), the initialization of particle positions need not be repeated for each iteration if all particles have already been placed in the domain in a previous iteration. Under that condition, subsequent calls to Particles_initPositions from the Grid construction loop will have partPosInitialized=.TRUE. so will return immediately, and Particles_updateRefinement will be called in each iteration when the number of blocks or the block distribution may have changed, to make sure that the retained particles get moved to the correct block (hence the name of the dummy argument). This implementation always returns FALSE. Alternative implementations may wish to return TRUE instead if initialization is very expensive.</td></tr>
  </table>
  </dd>
</dl>
<p>NAME Particles_initPositions</p>
<p>DESCRIPTION</p>
<p>Initialize particle locations. This routine calls pt_initPositions which a Particles unit's local routine to initialize the positions on leaf blocks. The routine also creates tags for all the particles This routine will initialize based on Lattice or with Density distribution depending upon which of the two is selected.</p>
<p>NOTES</p>
<p>SIDE EFFECTS</p>
<p>Updates particles data that is private to the Particles unit.</p>
<p>May modify an internal flag (pt_posInitialized) that keeps track of whether initialization of particle positions is complete.</p>
<p>SEE ALSO</p>
<p>Driver_initFlash Grid_initDomain Particles_initData </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
