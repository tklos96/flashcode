<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/Grid/GridSolvers/Pfft/MeshReconfiguration/PtToPt/gr_pfftMapToInput.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_06beb580571d8da4bd59dee7afe6838a.html">Grid</a></li><li class="navelem"><a class="el" href="dir_35d2cf0c04a4c82d90da4ab0f882caba.html">GridSolvers</a></li><li class="navelem"><a class="el" href="dir_6d0b4c1f565e8ee64627a278811801c6.html">Pfft</a></li><li class="navelem"><a class="el" href="dir_6ca1944ec3a39aa6a52f4f93a00b2cf4.html">MeshReconfiguration</a></li><li class="navelem"><a class="el" href="dir_5118bfce89d5f587bfbb0ab1f6e6810b.html">PtToPt</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">gr_pfftMapToInput.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a1b24717c250f84446bb9125957bb660d"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_pt_to_pt_2gr__pfft_map_to_input_8_f90.html#a1b24717c250f84446bb9125957bb660d">gr_pfftmaptoinput</a> (gridVar, pfftInputArray)</td></tr>
<tr class="separator:a1b24717c250f84446bb9125957bb660d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a1b24717c250f84446bb9125957bb660d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b24717c250f84446bb9125957bb660d">&#9670;&nbsp;</a></span>gr_pfftmaptoinput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gr_pfftmaptoinput </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>gridVar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:), target&#160;</td>
          <td class="paramname"><em>pfftInputArray</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>gr_pfftMapToInput(integer (IN) :: gridVar, &amp; real, target :: pfftInputArray(:))</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gridVar</td><td>An index corresponding to the source grid variable. </td></tr>
    <tr><td class="paramname">pfftInputArray</td><td>The input pencil array. SIDE EFFECTS Many! Sets a module level pointer to pfftInputArray. This pointer is used by the lower level routines (which are passed as function arguments to apply_fn_to_nodes) to indirectly copy data into pfftInputArray. Sets pfft_srcGridVar to be equal to gridVar. Finally, the lower level routines copy data between the nodes in the FLASH fragment list (pfft_listFG) and the PFFT fragment list (pfft_listPG).</td></tr>
  </table>
  </dd>
</dl>
<p>NAME</p>
<p>gr_pfftMapToInput</p>
<p>DESCRIPTION</p>
<p>Invokes lower level routines which copy data from the grid at variable "gridVar" and store it into the pencil input array. This is non-trivial because the data is obtained from overlapping FLASH grid elements which may exist on different processors.</p>
<p>NOTES</p>
<p>Steps: 1: Copy data from the grid and store it in nodes of the FLASH list. 2: Post receives for block fragments from the nodes of the PFFT list. 3: Post sends containing block fragments from the nodes of the FLASH list. 4: Wait for successful delivery of messages into local PFFT list. 5: Wait for successful delivery of messages into <b>remote</b> PFFT lists. 6: Transfer data from nodes of the PFFT list to the pencil array.</p>
<p>The communication between nodes is very simple, and we may actually want to slow the message exchange. This may be required if the number of messages is very large, i.e. a huge number of blocks and few processors. BUT... "If the call causes some system resource to be exhausted, then it will fail and return an error code. Quality implementations of MPI should ensure that this only happens in "pathological" cases. That is, an MPI implementation should be able to support a large number of pending nonblocking operations" [MPI standard]. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
