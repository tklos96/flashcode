<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/Grid/GridSolvers/Pfft/MeshReconfiguration/Collective/gr_pfftBufferTransfer.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_06beb580571d8da4bd59dee7afe6838a.html">Grid</a></li><li class="navelem"><a class="el" href="dir_35d2cf0c04a4c82d90da4ab0f882caba.html">GridSolvers</a></li><li class="navelem"><a class="el" href="dir_6d0b4c1f565e8ee64627a278811801c6.html">Pfft</a></li><li class="navelem"><a class="el" href="dir_6ca1944ec3a39aa6a52f4f93a00b2cf4.html">MeshReconfiguration</a></li><li class="navelem"><a class="el" href="dir_1201536967c8ff33907e3b9b1c65d211.html">Collective</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">gr_pfftBufferTransfer.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;constants.h&quot;</code><br />
<code>#include &quot;Pfft.h&quot;</code><br />
<code>#include &quot;Flash.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:ad060ddbe6e145885e0e1bebc999537ac"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gr__pfft_buffer_transfer_8_f90.html#ad060ddbe6e145885e0e1bebc999537ac">gr_pfftbuffertransfer</a> (direction, axis, buffer, pfftArray)</td></tr>
<tr class="separator:ad060ddbe6e145885e0e1bebc999537ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="ad060ddbe6e145885e0e1bebc999537ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad060ddbe6e145885e0e1bebc999537ac">&#9670;&nbsp;</a></span>gr_pfftbuffertransfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gr_pfftbuffertransfer </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>axis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), intent(inout)&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>pfftArray</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>gr_pfftBufferTransfer(integer(IN) :: direction, integer(IN) :: axis, real, dimension(:,:) :: buffer, real, dimension(:) :: pfftArray)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">direction</td><td>Specifies whether we copy from the buffer into pfftArray or vice versa. </td></tr>
    <tr><td class="paramname">axis</td><td>Specifies the map which should be used to describe the location of the data. Can be JAXIS or KAXIS. </td></tr>
    <tr><td class="paramname">buffer</td><td>2D array that is either a receive buffer (recvBuf) or a send buffer (sendBuf). </td></tr>
    <tr><td class="paramname">pfftArray</td><td>1D array that is either the pfft input or output array.</td></tr>
  </table>
  </dd>
</dl>
<p>NAME</p>
<p>gr_pfftBufferTransfer</p>
<p>DESCRIPTION</p>
<p>This routine is used in two different ways depending on how it is called:</p><ol type="1">
<li>It copies data from buffer (pfft_recvBuf in calling subroutine) to pfftArray (pfft_inArray in calling subroutine).</li>
<li>It copies data from pfftArray (pfft_outArray in calling subroutine) to buffer (pfft_sendBuf in calling subroutine).</li>
</ol>
<p>Whichever way the data is being copied, the recvMap (which points to either pfft_recvJMap or pfft_recvKMap) describes the coordinates where the data should be moved.</p>
<p>The data inside buffer is laid out as buffer(pointID, proc), where, pointID is a plain integer identifier. The data can be associated with both a FLASH and a PFFT grid point with the help of the module array, pfft_recv[J|K]Map. To obtain the grid point in FLASH space we use pointID as a counter in order to</p>
<p>restore the grid points in the same way that we packed the grid points. To obtain the grid point in PFFT space we convert the associated NDIM PFFT coordinates in pfft_recv[J|K]Map into a 1D coordinate in pfftArray. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
