<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/Grid/GridSolvers/Pfft/gr_pfftTranspose.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_06beb580571d8da4bd59dee7afe6838a.html">Grid</a></li><li class="navelem"><a class="el" href="dir_35d2cf0c04a4c82d90da4ab0f882caba.html">GridSolvers</a></li><li class="navelem"><a class="el" href="dir_6d0b4c1f565e8ee64627a278811801c6.html">Pfft</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">gr_pfftTranspose.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;Pfft.h&quot;</code><br />
<code>#include &quot;constants.h&quot;</code><br />
<code>#include &quot;Flash_mpi.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:aba991d0d9551829c9871f93ce28d2c0d"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gr__pfft_transpose_8_f90.html#aba991d0d9551829c9871f93ce28d2c0d">gr_pffttranspose</a> (dir, baseDatType, inArray, outArray, inlen, outlen, pr, comm)</td></tr>
<tr class="separator:aba991d0d9551829c9871f93ce28d2c0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46d2cb9221832b1f07e642188fc06d3e"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gr__pfft_transpose_8_f90.html#a46d2cb9221832b1f07e642188fc06d3e">gr_pffttranspose3darr</a> (dir, baseDatType, inArray, outArray, inlen, outlen, pr, comm)</td></tr>
<tr class="separator:a46d2cb9221832b1f07e642188fc06d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015d2f4704aab0bccd3be4f1b6f40264"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gr__pfft_transpose_8_f90.html#a015d2f4704aab0bccd3be4f1b6f40264">gr_pffttransposeimplementation</a> (dir, baseDatType, inArray, inArraySize, outArray, outArraySize, inlen, outlen, pr, comm)</td></tr>
<tr class="separator:a015d2f4704aab0bccd3be4f1b6f40264"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="aba991d0d9551829c9871f93ce28d2c0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba991d0d9551829c9871f93ce28d2c0d">&#9670;&nbsp;</a></span>gr_pffttranspose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gr_pffttranspose </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>baseDatType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>inArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>outArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(mdim), intent(in)&#160;</td>
          <td class="paramname"><em>inlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(mdim), intent(in)&#160;</td>
          <td class="paramname"><em>outlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>pr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>comm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>call gr_pfftTranspose (integer(IN) :: dir, integer(IN) :: baseDatType, real(INOUT) :: inArray(:), real([IN]OUT) :: outArray(:), integer(IN) :: len(MDIM) , integer(IN) :: lda, integer(IN) :: pr, integer(IN) :: comm)</p>
<p>call gr_pfftTranspose[3DArr] (integer(IN) :: dir, integer(IN) :: baseDatType, real(INOUT) :: inArray(:), real([IN]OUT) :: outArray(:), integer(IN) :: len(MDIM) , integer(IN) :: lda, integer(IN) :: pr, integer(IN) :: comm)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dir</td><td>whether forward or inverse transpose </td></tr>
    <tr><td class="paramname">baseDatType</td><td>whether real or complex data </td></tr>
    <tr><td class="paramname">inArray</td><td>array containing the data to be transposed. It is overwritten during the transpose </td></tr>
    <tr><td class="paramname">outArray</td><td>array containing transposed data </td></tr>
    <tr><td class="paramname">len</td><td>integer array containing the dimensions of the dataset </td></tr>
    <tr><td class="paramname">lda</td><td>datasize in first dimension of outArray. </td></tr>
    <tr><td class="paramname">pr</td><td>The number of processors in the communicator </td></tr>
    <tr><td class="paramname">comm</td><td>The communicator that includes all the processors along the row or the column of the grid, that participate in the distributed transpose.</td></tr>
  </table>
  </dd>
</dl>
<p>NAME</p>
<p>gr_pfftTranspose</p>
<p>DESCRIPTION</p>
<p>This routine carries out the distributed transpose of the data as follows: the original local array size is &lt;len(IAXIS),len(JAXIS),len(KAXIS)&gt; The correspoding global size of the domain is &lt;len(IAXIS),len(JAXIS)*nproc(JAXIS), len(KAXIS)*nproc(KAXIS)&gt;, where nproc(IAXIS:JAXIS) contains the configuration of the processor grid. nproc(IAXIS) is assumed to be 1.</p>
<p>If the transpose direction is forward, then the resulting local and global sizes respectively are : &lt;lda, len(KAXIS),newlen(IAXIS)/nproc(JAXIS)&gt; and &lt;lda, len(KAXIS)*nproc(KAXIS),newlen(IAXIS)&gt;, where lda is input giving the actual global size of the data along x-axis. if lda is not a multiple of nproc(JAXIS), then len(JAXIS) is calculated by rounding lda to the nearest higher multiple of nproc(JAXIS), and then dividing by nproc(JAXIS). Similarly newlen(IAXIS) is calculated by rounding len(IAXIS) to nearest higher multiple of nproc(JAXIS).</p>
<p>If the transpose is in inverse direction then the resulting local and global distributions are : &lt;lda,newlen(IAXIS)/nproc(KAXIS),len(JAXIS)&gt; and &lt;lda,newlen(IAXIS),len(JAXIS)&gt;.</p>
<p>NOTES This routine can handle real and complex data. If the data are complex then the routine assumes that len(IAXIS) is actually the complex vector size, and multiplies it by 2 internally. Similarly the returned value of len(IAXIS) is also that of a complex vector. </p>

</div>
</div>
<a id="a46d2cb9221832b1f07e642188fc06d3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46d2cb9221832b1f07e642188fc06d3e">&#9670;&nbsp;</a></span>gr_pffttranspose3darr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gr_pffttranspose3darr </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>baseDatType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), intent(inout)&#160;</td>
          <td class="paramname"><em>inArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), intent(inout)&#160;</td>
          <td class="paramname"><em>outArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(mdim), intent(in)&#160;</td>
          <td class="paramname"><em>inlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(mdim), intent(in)&#160;</td>
          <td class="paramname"><em>outlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>pr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>comm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a015d2f4704aab0bccd3be4f1b6f40264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a015d2f4704aab0bccd3be4f1b6f40264">&#9670;&nbsp;</a></span>gr_pffttransposeimplementation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gr_pffttransposeimplementation </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>baseDatType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(inarraysize), intent(inout)&#160;</td>
          <td class="paramname"><em>inArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>inArraySize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(outarraysize), intent(inout)&#160;</td>
          <td class="paramname"><em>outArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>outArraySize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(mdim), intent(in)&#160;</td>
          <td class="paramname"><em>inlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(mdim), intent(in)&#160;</td>
          <td class="paramname"><em>outlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>pr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>comm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
