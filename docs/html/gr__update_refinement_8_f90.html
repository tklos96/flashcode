<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/Grid/GridMain/AMR/paramesh/gr_updateRefinement.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_06beb580571d8da4bd59dee7afe6838a.html">Grid</a></li><li class="navelem"><a class="el" href="dir_a5ba4d35013f375122597140872d1634.html">GridMain</a></li><li class="navelem"><a class="el" href="dir_05ae419e4599d04cada32fb260516b32.html">AMR</a></li><li class="navelem"><a class="el" href="dir_dc00a9966eb127812b09432c10e25e84.html">paramesh</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">gr_updateRefinement.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;Flash.h&quot;</code><br />
<code>#include &quot;constants.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aeee40954d17dc4f8585877b3fa057e68"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gr__update_refinement_8_f90.html#aeee40954d17dc4f8585877b3fa057e68">DEBUG_POSITIVITY</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:aeee40954d17dc4f8585877b3fa057e68"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:af04673e399c72f4ad238d03ea73ab1f7"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gr__update_refinement_8_f90.html#af04673e399c72f4ad238d03ea73ab1f7">gr_updaterefinement</a> (gridChanged)</td></tr>
<tr class="separator:af04673e399c72f4ad238d03ea73ab1f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aeee40954d17dc4f8585877b3fa057e68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeee40954d17dc4f8585877b3fa057e68">&#9670;&nbsp;</a></span>DEBUG_POSITIVITY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_POSITIVITY&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="af04673e399c72f4ad238d03ea73ab1f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af04673e399c72f4ad238d03ea73ab1f7">&#9670;&nbsp;</a></span>gr_updaterefinement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gr_updaterefinement </td>
          <td>(</td>
          <td class="paramtype">logical, intent(out), optional&#160;</td>
          <td class="paramname"><em>gridChanged</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>call gr_updateRefinement(OPTIONAL, logical(OUT) :: gridChanged)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gridChanged</td><td>indicates if the grid changed as a result of this call</td></tr>
  </table>
  </dd>
</dl>
<p>NAME</p>
<p>gr_updateRefinement</p>
<p>DESCRIPTION</p>
<p>Internal routine to Grid_updateRefinement which handles much of the housekeeping for the routine.</p>
<p>This routine calls the PARAMESH routine amr_refine_derefine to actually carry out the refinements. During this stage, the blocks are redistributed across processors (if needed).</p>
<p>After the refinement, the newly created child blocks are filled via prolongation from the coarse parents. This prolongation step can use prolongation routines from paramesh, or defined by the user.</p>
<p>Once the prolongation is done, the guardcells are filled. Finally, the EOS is called on the block interiors if this may be necessary to make them thermodynamically consistent.</p>
<p>Note that this implementation does not fill guardcells after prolongation; the contents of guard cells should be considered undefined when this routine returns. The EOS is called on the block interiors if this may be necessary to make them thermodynamically consistent.</p>
<p>This routine also calls gr_updateParticleRefinement to move the particles to the correct block after the grid refines.</p>
<p>NOTES This routine was broken off from Grid_updateRefinement to allow the user to call this sequence of routines without code duplication. The user can now refine/derefine the grid in any user defined way (by using Grid_markRefineDerefine) etc. and then call gr_updateRefinement to do the housekeeping.</p>
<p>This implementation does not take care of updating guard cells, either before or after (de)refinement and prolongation. The caller is responsible for having guard cells filled. At least some layers of valid guard cells are needed on entry, in order for prolongation to work correctly! </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
