<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/IO/IOParticles/hdf5/parallel/io_ptReadParticleData.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_a2299b85ef517c141bbfcc23f706b99e.html">IO</a></li><li class="navelem"><a class="el" href="dir_d0f35e98a5bdc13e576aca2851511a66.html">IOParticles</a></li><li class="navelem"><a class="el" href="dir_e5561b3fb3c5ecb51a7827d17c6b03a6.html">hdf5</a></li><li class="navelem"><a class="el" href="dir_52cf44fd54d2a0609487e4eec4af1b1f.html">parallel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">io_ptReadParticleData.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a812dedb02e68a61603d62dadc42f469f"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hdf5_2parallel_2io__pt_read_particle_data_8_f90.html#a812dedb02e68a61603d62dadc42f469f">io_ptreadparticledata</a> ()</td></tr>
<tr class="separator:a812dedb02e68a61603d62dadc42f469f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a812dedb02e68a61603d62dadc42f469f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a812dedb02e68a61603d62dadc42f469f">&#9670;&nbsp;</a></span>io_ptreadparticledata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine io_ptreadparticledata </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>io_ptReadParticleData()</p>
<p></p>
<p>NAME</p>
<p>io_ptReadParticleData</p>
<p>DESCRIPTION</p>
<p>This routine reads the particle data from a HDF5 checkpoint file.</p>
<p>NOTES</p>
<p>This function contains two different strategies for reading particles from file. The first is to read all particles' properties in one go and the second is to read a single particle property at a time. The first method is faster, but can only be used when all properties are the same in the file and the FLASH binary. The second method is slower and we have observed terrible performance in large scale BG/P runs when using it with independent I/O. Collective I/O should improve things for method 2, but it will always be slower than method 1.</p>
<p>Previously we used io_h5read_particles and io_h5read_single_part_prop functions for method 1 and 2. These functions deadlocked when using collective HDF5 optimization and reading 0 particles from some processors. We now use io_xfer_cont_slab which is a generic function that works even when some processors read 0 particles. It has an optional Fortran 2003 interface which guarantees interoperability and it can be used by defining USE_IO_C_INTERFACE.</p>
<p>There are still some limitations when using io_h5read_localnp function. It will fail when there are more blocks than the size of the localnp dataset. This is sized in the checkpoint file to be the number of processors in the original run.</p>
<p>There is the same situation when using NoFbs and restarting on more processors. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
