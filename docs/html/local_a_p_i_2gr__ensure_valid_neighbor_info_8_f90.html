<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/Grid/localAPI/gr_ensureValidNeighborInfo.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_06beb580571d8da4bd59dee7afe6838a.html">Grid</a></li><li class="navelem"><a class="el" href="dir_b3bda9b337f7caadc1815fcd91d47868.html">localAPI</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">gr_ensureValidNeighborInfo.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;constants.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a3be26a101c2bbc6fa3bdf0eb6b1d4f40"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local_a_p_i_2gr__ensure_valid_neighbor_info_8_f90.html#a3be26a101c2bbc6fa3bdf0eb6b1d4f40">gr_ensurevalidneighborinfo</a> (requiredPattern)</td></tr>
<tr class="separator:a3be26a101c2bbc6fa3bdf0eb6b1d4f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a3be26a101c2bbc6fa3bdf0eb6b1d4f40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3be26a101c2bbc6fa3bdf0eb6b1d4f40">&#9670;&nbsp;</a></span>gr_ensurevalidneighborinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gr_ensurevalidneighborinfo </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>requiredPattern</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>call gr_ensureValidNeighborInfo(integer(IN) :: requiredPattern)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">requiredPattern</td><td>either 0 to mean ANY, i.e., any valid pattern is acceptable, or a specific recognized pattern ID value to indicate that the caller requires valid data exchanged according to that pattern. This is specific to a Grid implementation, see NOTES below. At the moment, only 0 and 10 are implemented, others act like 0.</td></tr>
  </table>
  </dd>
</dl>
<p>NAME</p>
<p>gr_ensureValidNeighborInfo</p>
<p>DESCRIPTION</p>
<p>This routine makes sure that some metadata kept internally by the grid implementation is in a state expected and relied upon by some code units (or Grid subunits).</p>
<p>Currently (2008-11-25) only Paramesh4 Grid implementations have an implementation of this subroutine that does anything.</p>
<p>This implementation checks whether the last call to mpi_amr_comm_setup was one that used the metadata exchange pattern used for guard cells. If not, the last global data exchange operation under mpi_amr_comm_setup must have been for prolongation or restriction or flux or edge data correction. In that case call mpi_amr_comm_setup as if for guard cell exchange, but don't actually communicate any solution variable data, don't copy anythign into any blocks' guard cells, don't interpolate, etc. We COULD, however, call Grid_fillGuardCells here.</p>
<p>The purpose here is to make sure the paramesh metadatastructures surr_blks, parent, child, etc. are in the state that is "normal" and expected by some parts of Grid code, in particular code in GridParticles. This "normal" state is the one that obtains after Grid_fillGuardCells has just been called.</p>
<p>NOTES</p>
<p>Paramesh4 uses/sets the following pattern ID values: 10 is the comm pattern for guard cell filling, 20 is the comm pattern for prolongation to new leaf blocks, 30 is the comm pattern for flux correction (incl. edge if facevars present?), 40 is the comm pattern for restriction (non-fulltree; fulltree seems to use 10).</p>
<p>HISTORY 2008-11-19 created in trunk - kw 2008-11-25 added requiredPattern argument and associated logic - kw </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
