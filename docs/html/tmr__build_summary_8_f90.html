<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLASH5 Test: fortran/FLASH5/source/monitors/Timers/TimersMain/MPINative/tmr_buildSummary.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLASH5 Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9d95adc37effe2d0447790667f945c24.html">fortran</a></li><li class="navelem"><a class="el" href="dir_aaca5e2157f58805ddf087a6c1d4d986.html">FLASH5</a></li><li class="navelem"><a class="el" href="dir_d9542af6519f0ca27bc6117ad523d5c6.html">source</a></li><li class="navelem"><a class="el" href="dir_ec2bd5eb47bdaefecd3f981c0e888885.html">monitors</a></li><li class="navelem"><a class="el" href="dir_e4e563838d859049254796e13ed2290a.html">Timers</a></li><li class="navelem"><a class="el" href="dir_457036cd0b44af2ae8ce65b5b21c2849.html">TimersMain</a></li><li class="navelem"><a class="el" href="dir_91029008bae6c7fc882e3cc36cb8f52b.html">MPINative</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">tmr_buildSummary.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;constants.h&quot;</code><br />
<code>#include &quot;Flash_mpi.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:aa7daa418e43851935eed9e4a0cd18ad4"><td class="memItemLeft" align="right" valign="top">recursive subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tmr__build_summary_8_f90.html#aa7daa418e43851935eed9e4a0cd18ad4">tmr_buildsummary</a> (summaryArray, length, columns, currentIndex, indentation, rootStack, reduced)</td></tr>
<tr class="separator:aa7daa418e43851935eed9e4a0cd18ad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="aa7daa418e43851935eed9e4a0cd18ad4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7daa418e43851935eed9e4a0cd18ad4">&#9670;&nbsp;</a></span>tmr_buildsummary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">recursive subroutine tmr_buildsummary </td>
          <td>(</td>
          <td class="paramtype">character(len=max_string_length), dimension(length, columns), intent(inout)&#160;</td>
          <td class="paramname"><em>summaryArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>columns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(inout)&#160;</td>
          <td class="paramname"><em>currentIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>indentation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(tmr_stack), intent(in)&#160;</td>
          <td class="paramname"><em>rootStack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>reduced</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p></p>
<p>call tmr_buildSummary(character, len=MAX_STRING_LENGTH, dimension(length,columns,intent(inout) ::summaryArray, integer, intent(in) :: length, integer, intent(in) :: columns, integer, intent(inout) :: currentIndex, integer, intent(in) :: indentation, type(tmr_stack), intent(in) :: rootStack, logical, intent(in) :: reduced)</p>
<p></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">summaryArray</td><td>see above </td></tr>
    <tr><td class="paramname">length</td><td>first index size of array summaryArray </td></tr>
    <tr><td class="paramname">columns</td><td>second index size of array summaryArray </td></tr>
    <tr><td class="paramname">currentIndex</td><td>the row in summaryArray to add to next </td></tr>
    <tr><td class="paramname">indentation</td><td>how much we're already indented when we enter this routine </td></tr>
    <tr><td class="paramname">rootStack</td><td>which timer stack we're starting at upon entry </td></tr>
    <tr><td class="paramname">reduced</td><td>If true, produce timer summary information reduced across </td></tr>
    <tr><td class="paramname">processors,instead</td><td>of the default one processor summary.</td></tr>
  </table>
  </dd>
</dl>
<p>NAME</p>
<p>tmr_buildSummary</p>
<p>DESCRIPTION</p>
<p>A recursive routine that takes as input the summary output string data, a root timer stack and goes through the Timers runtime timer stacks and builds the summary output. This is an inherently recursive process&ndash; what you do at each level of a stack is what you want to do after you add a level to that stack. Each time this routine is called with a stack of timer names, it goes through the fill list of timer names (in the order in which they were created) and checks if adding the current timer name to the current stack matches an entry in the list of all timer stacks that occured during execution of Flash, and if it does, it adds that entry into the summary, and calls itself with the new root stack as the one it just found by adding the current timer name.</p>
<p>The output is kindof strange, but it is the summary data as strings in summaryArray. The first index of summaryArray represents a row of output, and the second, a column, more or less. The first column is the exception&ndash; summaryArray(i, 1) is a number, n, of a non-blank characters, in this case, 'c', which represents that the output of row i should be indented n characters. This is how the logfile knows how to indent the timer name at the beginning of each row of output to create the effect of showing the timer in the summary. The second column, summaryArray(i, 2) is the name of the timer, summaryArray(i,3) is the amount of time spent in the timer, summaryArray(i,4) is the number of times it was started, summaryArray(i,5) is the time spent / times called, and summaryArray(i,6) is the percentage of total runtime spent in this timer. If you want to change the nature of the summary, you would need to change this file, and the logfile code that labels the columns in the logfile.</p>
<p>If reduced is .TRUE., this subroutine does the MPI reduce calls for generating min, max, and average times across all processors and formats results differently.</p>
<p>NOTES When the reduced flag is used, this subroutine may hang, if the set of Timers_start and Timers_stop calls executed on each processor is not the same. This may happen in particular when there are fewer (leaf) blocks than processors. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
